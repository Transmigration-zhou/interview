[toc]



## 1.进程与线程的区别

https://flying-veal.notion.site/a4ca2ea1cfda477f9063c86c00daab3a

[从 linux内核来看进程与线程的异同](https://blog.csdn.net/smilejiasmile/article/details/109389607)

1. 一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程。
2. 进程是资源分配的基本单位，线程是独立调度的基本单位。
3. 进程间**不共用**变量与资源；线程间**共用**变量与资源。
4. 线程的划分尺度小于进程，使得多线程程序的并发性高。
5. 线程不能够独立执行， 必须依存在进程中。
6. 每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一进程下的所有线程共享该进程的内存空间，即共享堆、全局变量、静态变量、指针、引用、打开的文件等，而独自占有栈空间，线程之间切换的开销小；
7. 进程间通信需要借助操作系统（IPC），比较麻烦；线程间可以直接读写进程数据段来进行通信，但需要处理线程同步问题；

### 为什么要引入线程？

线程可以看作是轻量级的进程，但是它比进程更容易创建，也更容易撤销。（即线程成为独立调度的基本单位）



## 2.虚拟技术

虚拟技术指把一个物理实体转换为多个逻辑实体，主要有两种：时分复用技术和空分复用技术。

### 时分复用技术

多个进程能在同一个 CPU 上并发执行就是因为使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。

例子：既然一个程序需要被分配 CPU 才能正常执行，那为什么单核 CPU 的电脑中也能同时运行这么多个程序呢？

### 空分复用技术

虚拟内存使用了空分复用技术，将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，这些页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页从磁盘置换到内存中。空分复用技术的原理就是==把内存作为高速缓存来使用，只用来保存最频繁使用的部分程序，而把程序的大部分放在磁盘上==。

例子：这些程序同时运行需要的内存远大于 4 GB，那么为什么它们还可以在我的电脑上同时运行呢？



## 3.编译链接的过程

程序要运行起来，必须经过四个步骤：预处理、编译、汇编和链接。

- 预处理：展开#define宏定义，处理所有的条件编译指令#if等等，删除所有注释，插入包含的头文件，添加行号以便编译错误时能够显式行号，最后生成一个.i文件
- 编译：把预处理完的文件进行一系列词法分析、语法分析、语义分析以及优化后生成相应的汇编代码文件，最后生成一个.s文件；
- 汇编：将汇编代码转换成机器可以执行的指令，最后生成一个.o文件；
- 链接：将有关的目标文件彼此相连接，即将在一个文件中引用的符号同该符号在另外一个文件中的定义连接起来，使得所有的这些目标文件成为一个能够被操作系统装入执行的统一整体。



## 4.死锁

### 什么是死锁?

多个进程可以竞争有限数量的资源。当一个进程申请资源时，如果这时没有可用资源，那么这个进程进入等待状态。有时，如果所申请的资源被其他等待进程占有，那么该等待进程有可能再也无法改变状态。这种情况称为死锁。

### 死锁的条件

- 互斥条件：每个资源要么已经分配给了一个进程，要么就是可用的；
- 占有和等待条件：已经得到了某个资源的进程可以再请求新的资源；
- 不可抢占条件：已经分配给一个进程的资源不能强制性地被抢占，它只能被占有它的进程显式地释放；
- 环路等待条件：死锁发生时，系统中一定有两个或以上的进程组成的一条环路，该环路中每个进程都在等待着下一个进程所占有的资源。

死锁发生时，以上四个条件一定是同时满足的，如果其中任何一个条件不成立，死锁就不会发生。

### 解决死锁的方法

- 一次性分配所有的资源，这样进程就不会得到了某个资源再去请求新的资源了，即破坏占有和等待条件；
- 只要有一个资源得不到分配，也不给这个进程分配其他的资源，即破坏占有等待条件；
- 当某进程获得了部分资源，但得不到其他资源，则释放已占有的资源，即破坏不可抢占条件；
- 系统给每类资源赋予一个编号，每一个进程按编号递增的顺序请求资源，释放则相反，即破坏环路等待条件。



## 5.kill -9发生了什么？

`kill -9 pid`是向进程号为`pid`的进程发送`SIGKILL`信号，`SIGKILL`既不能被应用程序捕获，也不能被阻塞或忽略，其动作是立即结束指定进程。



## 6.硬链接和软链接的区别？

硬链接是指针，所有硬链接都指向同一个磁盘块，删除一个指针并不会真正删除文件，只有把指向该文件的所有指针全部删除，才会真的删除该文件；
软链接是另外一种类型的文件，保存的是它指向文件的全路径，访问时会替换成绝对路径，软链接可以理解为Windows上的快捷方式。

